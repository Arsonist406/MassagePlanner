# ğŸ—ï¸ Architecture Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER INTERFACE                        â”‚
â”‚                     (Browser / Mobile)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      REACT APPLICATION                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      App.tsx                            â”‚ â”‚
â”‚  â”‚              (Main Application Logic)                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â”‚                               â”‚                â”‚
â”‚             â–¼                               â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  AppointmentForm     â”‚      â”‚     ScheduleView         â”‚ â”‚
â”‚  â”‚  (Create/Edit Form)  â”‚      â”‚  (Timeline Display)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                           â”‚                  â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                     â–¼                     â–¼             â–¼    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚         â”‚  AppointmentBlock   â”‚  â”‚  BreakBlock  â”‚  â”‚Grid  â”‚ â”‚
â”‚         â”‚   (Drag/Resize)     â”‚  â”‚ (Drag/Resize)â”‚  â”‚Lines â”‚ â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CUSTOM HOOKS                            â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ useAppointments  â”‚  â”‚ useDragDrop  â”‚  â”‚  useResize   â”‚  â”‚
â”‚  â”‚ (State Manager)  â”‚  â”‚ (Drag Logic) â”‚  â”‚(Resize Logic)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SERVICE LAYER                            â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           appointmentService.ts                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ fetchAppointments()                       â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ createAppointment()                       â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ updateAppointment()                       â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ deleteAppointment()                       â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ fetchBreaks()                             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ createBreak()                             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ updateBreak()                             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ deleteBreak()                             â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            supabaseClient.ts                         â”‚   â”‚
â”‚  â”‚         (Supabase Initialization)                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SUPABASE (Backend)                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              PostgreSQL Database                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  appointments      â”‚  â”‚      breaks            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ id           â”‚  â”‚  â”‚  â”‚ id               â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ client_name  â”‚  â”‚  â”‚  â”‚ start_time       â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ start_time   â”‚  â”‚  â”‚  â”‚ duration_minutes â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ duration_... â”‚  â”‚  â”‚  â”‚ end_time         â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ end_time     â”‚  â”‚  â”‚  â”‚ type             â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ type         â”‚  â”‚  â”‚  â”‚ created_at       â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ created_at   â”‚  â”‚  â”‚  â”‚ updated_at       â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ updated_at   â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

### Creating an Appointment

```
User Input (Form)
      â”‚
      â–¼
AppointmentForm.tsx
      â”‚
      â–¼
App.tsx (handleFormSubmit)
      â”‚
      â–¼
useAppointments.createAppointment()
      â”‚
      â–¼
appointmentService.createAppointment()
      â”‚
      â–¼
supabaseClient (POST request)
      â”‚
      â–¼
Supabase Database (INSERT)
      â”‚
      â–¼
Response (new appointment)
      â”‚
      â–¼
Update Local State
      â”‚
      â–¼
Re-render ScheduleView
      â”‚
      â–¼
Display New Appointment
```

### Drag-and-Drop Flow

```
User Drags Appointment
      â”‚
      â–¼
AppointmentBlock.tsx (onMouseDown/onTouchStart)
      â”‚
      â–¼
ScheduleView.tsx (handleDragStart)
      â”‚
      â–¼
Track Drag State
      â”‚
      â–¼
User Releases (onMouseUp/onTouchEnd)
      â”‚
      â–¼
ScheduleView.tsx (handleDragEnd)
      â”‚
      â–¼
Calculate New Time from Y Position
      â”‚
      â–¼
onUpdateAppointment(id, { start_time: newTime })
      â”‚
      â–¼
useAppointments.updateAppointment()
      â”‚
      â–¼
appointmentService.updateAppointment()
      â”‚
      â–¼
Supabase Database (UPDATE)
      â”‚
      â–¼
Update Local State
      â”‚
      â–¼
Re-render at New Position
```

## Component Hierarchy

```
App
â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ Title
â”‚   â””â”€â”€ Action Buttons
â”‚       â”œâ”€â”€ New Appointment Button
â”‚       â””â”€â”€ Auto-Insert Breaks Button
â”‚
â”œâ”€â”€ Main Content
â”‚   â”œâ”€â”€ AppointmentForm (conditional)
â”‚   â”‚   â”œâ”€â”€ Client Name Input
â”‚   â”‚   â”œâ”€â”€ Start Time Input
â”‚   â”‚   â”œâ”€â”€ Duration Select
â”‚   â”‚   â””â”€â”€ Submit/Cancel Buttons
â”‚   â”‚
â”‚   â””â”€â”€ ScheduleView
â”‚       â”œâ”€â”€ Time Labels (8:00 - 21:00)
â”‚       â”œâ”€â”€ Grid Lines
â”‚       â”œâ”€â”€ Appointment Blocks
â”‚       â”‚   â”œâ”€â”€ Client Name
â”‚       â”‚   â”œâ”€â”€ Time Range
â”‚       â”‚   â”œâ”€â”€ Duration
â”‚       â”‚   â”œâ”€â”€ Edit Button
â”‚       â”‚   â”œâ”€â”€ Delete Button
â”‚       â”‚   â””â”€â”€ Resize Handle
â”‚       â”‚
â”‚       â””â”€â”€ Break Blocks
â”‚           â”œâ”€â”€ "Break" Label
â”‚           â”œâ”€â”€ Time Range
â”‚           â”œâ”€â”€ Remove Button
â”‚           â””â”€â”€ Resize Handle
â”‚
â””â”€â”€ Footer
    â””â”€â”€ Stats
        â”œâ”€â”€ Total Appointments
        â”œâ”€â”€ Total Breaks
        â””â”€â”€ Total Minutes
```

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         useAppointments Hook                â”‚
â”‚                                             â”‚
â”‚  State:                                     â”‚
â”‚  â”œâ”€â”€ appointments: Appointment[]            â”‚
â”‚  â”œâ”€â”€ breaks: Break[]                        â”‚
â”‚  â”œâ”€â”€ isLoading: boolean                     â”‚
â”‚  â””â”€â”€ error: string | null                   â”‚
â”‚                                             â”‚
â”‚  Actions:                                   â”‚
â”‚  â”œâ”€â”€ loadSchedule()                         â”‚
â”‚  â”œâ”€â”€ createAppointment()                    â”‚
â”‚  â”œâ”€â”€ updateAppointment()                    â”‚
â”‚  â”œâ”€â”€ deleteAppointment()                    â”‚
â”‚  â”œâ”€â”€ createBreak()                          â”‚
â”‚  â”œâ”€â”€ updateBreak()                          â”‚
â”‚  â”œâ”€â”€ deleteBreak()                          â”‚
â”‚  â”œâ”€â”€ autoInsertBreaks()                     â”‚
â”‚  â””â”€â”€ getAllScheduleItems()                  â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    Consumed by App.tsx
              â”‚
              â”œâ”€â”€â–¶ Passed to ScheduleView
              â”‚    (appointments, breaks, callbacks)
              â”‚
              â””â”€â”€â–¶ Passed to AppointmentForm
                   (createAppointment callback)
```

## Technology Stack Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Presentation Layer                 â”‚
â”‚                                             â”‚
â”‚  â€¢ React Components (TSX)                   â”‚
â”‚  â€¢ TailwindCSS (Styling)                    â”‚
â”‚  â€¢ Custom CSS (Animations)                  â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Business Logic Layer               â”‚
â”‚                                             â”‚
â”‚  â€¢ Custom Hooks (useAppointments, etc.)     â”‚
â”‚  â€¢ Event Handlers                           â”‚
â”‚  â€¢ State Management                         â”‚
â”‚  â€¢ Time Calculations (date-fns)             â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Data Access Layer                  â”‚
â”‚                                             â”‚
â”‚  â€¢ appointmentService.ts                    â”‚
â”‚  â€¢ supabaseClient.ts                        â”‚
â”‚  â€¢ Type Definitions                         â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          External Services                  â”‚
â”‚                                             â”‚
â”‚  â€¢ Supabase (Database + API)                â”‚
â”‚  â€¢ PostgreSQL                               â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Build & Deployment Pipeline

```
Development
    â”‚
    â”œâ”€â”€ npm run dev (Vite Dev Server)
    â”‚   â”œâ”€â”€ Hot Module Replacement
    â”‚   â”œâ”€â”€ TypeScript Compilation
    â”‚   â””â”€â”€ TailwindCSS Processing
    â”‚
    â–¼
Production Build
    â”‚
    â”œâ”€â”€ npm run build
    â”‚   â”œâ”€â”€ TypeScript â†’ JavaScript (ES2020)
    â”‚   â”œâ”€â”€ TailwindCSS â†’ Minified CSS
    â”‚   â”œâ”€â”€ React â†’ Optimized Bundle
    â”‚   â”œâ”€â”€ Tree Shaking
    â”‚   â”œâ”€â”€ Code Splitting
    â”‚   â””â”€â”€ Asset Optimization
    â”‚
    â–¼
Output: dist/
    â”‚
    â–¼
Deployment to Netlify
    â”‚
    â”œâ”€â”€ Upload dist/ folder
    â”œâ”€â”€ Configure redirects (SPA routing)
    â”œâ”€â”€ Set environment variables
    â””â”€â”€ CDN distribution
    â”‚
    â–¼
Live Application
```

## File Dependencies

```
main.tsx
  â””â”€â”€ App.tsx
        â”œâ”€â”€ useAppointments.ts
        â”‚     â””â”€â”€ appointmentService.ts
        â”‚           â””â”€â”€ supabaseClient.ts
        â”‚
        â”œâ”€â”€ AppointmentForm.tsx
        â”‚     â”œâ”€â”€ types/index.ts
        â”‚     â””â”€â”€ date-fns
        â”‚
        â””â”€â”€ ScheduleView.tsx
              â”œâ”€â”€ AppointmentBlock.tsx
              â”‚     â”œâ”€â”€ types/index.ts
              â”‚     â””â”€â”€ date-fns
              â”‚
              â”œâ”€â”€ BreakBlock.tsx
              â”‚     â”œâ”€â”€ types/index.ts
              â”‚     â””â”€â”€ date-fns
              â”‚
              â””â”€â”€ types/index.ts
```

## Event Flow for Touch/Mouse Interactions

```
User Interaction (Mouse/Touch)
        â”‚
        â–¼
    Browser Event
        â”‚
        â”œâ”€â”€â–¶ Mouse Event
        â”‚    â”œâ”€â”€ onMouseDown
        â”‚    â”œâ”€â”€ onMouseMove (window)
        â”‚    â””â”€â”€ onMouseUp (window)
        â”‚
        â””â”€â”€â–¶ Touch Event
             â”œâ”€â”€ onTouchStart
             â”œâ”€â”€ onTouchMove (window, preventDefault)
             â””â”€â”€ onTouchEnd (window)
        â”‚
        â–¼
Component Handler
        â”‚
        â”œâ”€â”€â–¶ Drag Operations
        â”‚    â”œâ”€â”€ Calculate delta Y
        â”‚    â”œâ”€â”€ Convert to time offset
        â”‚    â”œâ”€â”€ Snap to 15-min intervals
        â”‚    â””â”€â”€ Update appointment start_time
        â”‚
        â””â”€â”€â–¶ Resize Operations
             â”œâ”€â”€ Calculate delta Y
             â”œâ”€â”€ Convert to duration change
             â”œâ”€â”€ Snap to 15-min intervals
             â””â”€â”€ Update appointment duration
        â”‚
        â–¼
State Update
        â”‚
        â–¼
Database Sync
        â”‚
        â–¼
UI Re-render
```

---

This architecture provides:
- âœ… **Separation of Concerns**: UI, Logic, Data separated
- âœ… **Reusability**: Custom hooks can be reused
- âœ… **Maintainability**: Clear structure for adding features
- âœ… **Testability**: Each layer can be tested independently
- âœ… **Scalability**: Easy to add new features
